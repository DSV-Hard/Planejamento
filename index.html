<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PLANEJAMENTO</title>
	<link rel="icon" type="image/png" href="https://raw.githubusercontent.com/DSV-Hard/Planejamento/main/favicon.png">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <link rel="stylesheet" href="style.css">  <!-- CHAMADA DOS ESTILOS -->
</head>
<body style="background-color: #f5fff5;">
    <div id="cabecalho">
		<img src="https://raw.githubusercontent.com/DSV-Hard/Planejamento/main/logo.png" alt="Logo da Empresa">
		<h1>PLANEJAMENTO</h1>
    </div>
    <div id="main-frame">
    <div style="text-align: center; margin-bottom: 20px;">
        <button id="btn-principal" class="active principal" onclick="alternarAbas('principal')">VE√çCULO PRINCIPAL</button>
        <button id="btn-aplicaveis" class="aplicaveis" onclick="alternarAbas('aplicaveis')">VE√çCULOS APLIC√ÅVEIS</button>
    </div>
    <h2 id="aba-titulo" style="text-align: center; margin-top: 10px;">VE√çCULO PRINCIPAL</h2>

    <div id="aba-principal">
    <fieldset>			
		<legend>INFORMA√á√ïES GERAIS</legend>
		<label>Planejado por</label><input type="text" id="planejado_por" placeholder="Nome completo do Desenvolvedor">
		<label>Link do Card (ClickUp)</label><input type="text" id="clickup" placeholder="https://app.clickup.com/...">
		<label>Ve√≠culo Refer√™ncia</label><input type="text" id="veiculo" placeholder="Car>1994>Mazda>RX-7>1.3 256cv (13B - Wankel)">
		<div class="id-fields-container">
			<div class="field-group">
				<label>ID DIAGRAMAS</label>
				<input type="text" id="iddiagramas" placeholder="'Criar' ou 'ID do livro'">
			</div>
			<div class="field-group">
				<label>ID FUS√çVEIS</label>
				<input type="text" id="idfusiveis" placeholder="'Criar' ou 'ID do livro'">
			</div>
		</div>
		<label>PASTA DO VE√çCULO</label><input type="text" id="pasta" placeholder="P:\Desenvolvimento\+ DIAGRAMAS...">
		<div class="checkbox-block">
			<label class="checkbox-title">PESQUISA (VE√çCULO PRINCIPAL OU SEMELHANTE)</label>
			<div class="checkbox-inline" onchange="togglePesquisaTexto('principal', null)">
				<label><input type="radio" name="pesquisa" value="sim"> SIM</label>
				<label><input type="radio" name="pesquisa" value="nao" checked> N√ÉO</label>
			</div>
		</div>
		<textarea id="pesquisa_texto" rows="3" placeholder="I:\INFORMA√á√ïES\Mazda\Pesquisa\RX-7..." style="display: none; min-height: auto;"></textarea>
		
		<div class="checkbox-blockk"></div>
		
		<label style="margin-top: 20px;">IMPORTANTE PARA O DESENVOLVIMENTO</label>
		<div class="development-field-container">
			<div contenteditable="true" class="editable-content" id="comentarios" data-field="comentarios" oninput="salvarDadosComentarios()" data-placeholder="Descreva tudo que influenciar√° no desenvolvimento dos manuais..."></div>
			<button type="button" class="btn-anexar" onclick="abrirSeletorArquivo('comentarios')">Anexar</button>
			<input type="file" id="file_comentarios" class="file-input-hidden" multiple accept="image/*,.pdf,.doc,.docx,.txt,.csv,.xls,.xlsx,.ppt,.pptx" onchange="processarArquivosSelecionados('comentarios', this.files)">
		</div>
		
		<div class="checkbox-blockk"></div>
		
		<div class="checkbox-block">
		<label>ASSOCIA√á√ÉO / CHASSI</label>
		<div class="checkbox-inline" style="margin-bottom: 2px;">
			<label><input type="radio" name="aplicacao_chassi" value="mesma"> Mesma associa√ß√£o</label>
			<label><input type="radio" name="aplicacao_chassi" value="ajustar"> Ajustar associa√ß√£o</label>
		</div>
		</div>
		<textarea id="aplicacao_chassi_texto" rows="3" placeholder="Insira aqui a aplica√ß√£o e/ou chassis do ve√≠culo." style="min-height: auto;"></textarea>
		<div style="margin-bottom: 10px; display: flex; flex-wrap: wrap; justify-content: left;">
			<button type="button" class="orange-button" onclick="window.open('http://192.168.201.220:4000/', '_blank')" style="margin-top: 5px;">Buscar chassi</button>
		</div>
		
		<div class="checkbox-blockk"></div>
		
		<label>PEDIDOS DE ILUSTRA√á√ÉO / TRATAMENTO DE IMAGEM</label>
		<textarea id="ilustracao_texto" rows="3" style="min-height: auto;" placeholder="P:\Desenvolvimento\+ DIAGRAMAS\0. (2026-X)\Mazda\RX-7>1.3 256cv (13B - Wankel) (1994)\Fotos e Ilustra√ß√µes\Pedidos..."></textarea>
	</fieldset>
			<fieldset>
			<legend>ITENS DE S√âRIE / OPCIONAIS</legend>
			<div class="checkbox-block">
			  <label class="checkbox-title">TIPO DE CHAVE:</label>
			  <div class="checkbox-inline">
				<label><input type="checkbox" name="chave" value="Comum"> COMUM</label>
				<label><input type="checkbox" name="chave" value="Presencial (Bot√£o)"> PRESENCIAL (BOT√ÉO)</label>
				<label><input type="checkbox" name="chave" value="Encaixe Inteligente"> ENCAIXE INTELIGENTE</label>
			  </div>
			</div>

			<div class="checkbox-blockk"></div>
			
			<div class="checkbox-block">
			  <label class="checkbox-title">FUN√á√ÉO START/STOP:</label>
			  <div class="checkbox-inline">
				<label><input type="radio" name="startstop" value="sim_serie"> SIM (DE S√âRIE)</label>
				<label><input type="radio" name="startstop" value="sim_opcional"> SIM (OPCIONAL)</label>
				<label><input type="radio" name="startstop" value="nao"> N√ÉO</label>
			  </div>
			</div>

			<div class="checkbox-blockk"></div>

			<div class="checkbox-block">
			  <label class="checkbox-title">AR-CONDICIONADO:</label>
			  <div class="checkbox-inline">
				<label><input type="checkbox" name="ac" value="Manual"> MANUAL</label>
				<label><input type="checkbox" name="ac" value="Autom√°tico"> AUTOM√ÅTICO</label>
				<label><input type="checkbox" name="ac" value="S√≥ Ar Quente"> S√ì AR QUENTE</label>
			  </div>
			</div>

			<div class="checkbox-blockk"></div>
			
			<div class="checkbox-block">
			  <label class="checkbox-title">TRANSMISS√ÉO:</label>
			  <div class="checkbox-inline">
				<label><input type="checkbox" name="atmt" value="AT"> AT</label>
				<label><input type="checkbox" name="atmt" value="MT"> MT</label>
			  </div>
			</div>

			<div class="checkbox-blockk"></div>

			<div class="checkbox-block">
				<label class="checkbox-title">TRA√á√ÉO:</label>
				<div class="checkbox-inline">
					<label><input type="checkbox" name="tracao" value="4X2"> 4X2</label>
					<label><input type="checkbox" name="tracao" value="4X4"> 4X4</label>
					<label><input type="checkbox" name="tracao" value="6X2"> 6X2</label>
					<label><input type="checkbox" name="tracao" value="6X4"> 6X4</label>
					<label><input type="checkbox" name="tracao" value="8X2"> 8X2</label>
					<label><input type="checkbox" name="tracao" value="8X4"> 8X4</label>
					<label><input type="checkbox" name="tracao" value="8X8"> 8X8</label>
				</div>
			</div>
			
			<div class="checkbox-blockk"></div>
			
			<label>OUTROS (DE S√âRIE):</label>
			<textarea id="outros_serie" rows="3" placeholder="Itens de s√©rie n√£o listados acima..."></textarea>
			
			<div class="checkbox-blockk"></div>
			
			<label>OUTROS (OPCIONAIS):</label>
			<textarea id="outros_opcional" rows="3" placeholder="Itens opcionais n√£o listados acima..."></textarea>
		
		</fieldset>

        <fieldset>
            <legend>SISTEMAS</legend>
            <div id="sistemas-container"></div>
            <div id="paginas-navegacao" style="text-align: center; margin-bottom: 10px;"></div>
            <div style="display: flex; gap: 10px; justify-content: center; margin: 10px 0;">
                <button type="button" class="orange-button" onclick="moverSistema(-1)" title="Mover cap√≠tulo para a esquerda">‚Üê</button>
                <button type="button" class="orange-button" onclick="moverSistema(1)" title="Mover cap√≠tulo para a direita">‚Üí</button>
            </div>
            <div style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
                <button type="button" class="orange-button" onclick="adicionarSistema()">‚ûï Adicionar Cap√≠tulo</button>
                <button type="button" class="orange-button" onclick="removerUltimoSistema()">‚ûñ Remover Cap√≠tulo Selecionado</button>
            </div>
        </fieldset>

        <fieldset>
			<legend>DADOS DO CARD</legend>
			
			<div class="checkbox-block">
				<label class="checkbox-title">QUANTAS PARTES TER√Å O PLANEJAMENTO?</label>
				<div class="checkbox-inline" onchange="toggleParte2Principal()">
					<label><input type="radio" name="qtd_partes" value="uma" > UMA</label>
					<label><input type="radio" name="qtd_partes" value="duas"> DUAS</label>
				</div>
			</div>
			
			<div class="checkbox-blockk"></div>
			
			<div id="card-parte1-container" style="display: none;">
			<div class="card-details-block">
				<label>Dificuldade:</label>
				<select id="dificuldade">
					<option value="">Selecione a dificuldade</option>
					<option value="F√°cil">F√ÅCIL</option>
					<option value="M√©dio">M√âDIO</option>
					<option value="Dif√≠cil">DIF√çCIL</option>
					<option value="Carroceria F√°cil">CARROCERIA F</option>
					<option value="Carroceria M√©dio">CARROCERIA M</option>
					<option value="Carroceria Dif√≠cil">CARROCERIA D</option>
				</select>
				<label>Justificativa:</label>
				<input type="text" id="justificativa" placeholder="Descreva o motivo da dificuldade selecionada...">
			</div>
			</div>
			
			<div id="card-parte2-container" style="display: none;">

				<h3 style="text-align: left; color: #4472c4; margin-top: 20px;">PARTE 1</h3>
				<div class="card-details-block">
					<label>Dificuldade:</label>
					<select id="dificuldade">
					<option value="">Selecione a dificuldade</option>
					<option value="F√°cil">F√ÅCIL</option>
					<option value="M√©dio">M√âDIO</option>
					<option value="Dif√≠cil">DIF√çCIL</option>
					<option value="Carroceria F√°cil">CARROCERIA F</option>
					<option value="Carroceria M√©dio">CARROCERIA M</option>
					<option value="Carroceria Dif√≠cil">CARROCERIA D</option>
				</select>
				<label>Justificativa:</label>
				<input type="text" id="justificativa" placeholder="Descreva o motivo da dificuldade selecionada...">
				</div>
				<div class="checkbox-blockk"></div>
				<h3 style="text-align: left; color: #4472c4; margin-top: 20px;">PARTE 2</h3>
				<div class="card-details-block">
					<label>Dificuldade:</label>
					<select id="dificuldade_parte2">
						<option value="">Selecione a dificuldade</option>
						<option value="F√°cil">F√ÅCIL</option>
						<option value="M√©dio">M√âDIO</option>
						<option value="Dif√≠cil">DIF√çCIL</option>
						<option value="Carroceria F√°cil">CARROCERIA F</option>
						<option value="Carroceria M√©dio">CARROCERIA M</option>
						<option value="Carroceria Dif√≠cil">CARROCERIA D</option>
					</select>
					<label>Justificativa:</label>
					<input type="text" id="justificativa_parte2" placeholder="Descreva o motivo da dificuldade selecionada...">
				</div>
			</div>
		</fieldset>
	</div>
	
	<div id="aba-aplicaveis" class="tab-content" style="display: none;">
    <div id="paginacao-veiculos-aplicaveis" class="paginacao-veiculos" style="text-align: center; margin-bottom: 10px;"></div>
	<div class="button-group-centered">
		<button class="orange-button" onclick="adicionarVeiculoAplicavel()">‚ûï Adicionar Ve√≠culo</button>
		<button class="orange-button" onclick="removerUltimoVeiculoAplicavel()">‚ûñ Remover Ve√≠culo Selecionado</button>
	</div>

		<div id="veiculos-aplicaveis-container"></div>
		<div id="dados-card-aplicaveis" style="display: none;">
		<fieldset>
		<legend>DADOS DO CARD</legend>
		<label>Dificuldade (Aplic√°veis):</label>
		<select id="dificuldade_aplicaveis">
			<option value="">Selecione a dificuldade</option>
			<option value="F√°cil">F√ÅCIL</option>
			<option value="M√©dio">M√âDIO</option>
			<option value="Dif√≠cil">DIF√çCIL</option>
		</select>
		<label>Justificativa:</label><input type="text" id="justificativa_aplicaveis" placeholder="Descreva o motivo da dificuldade selecionada...">
			</fieldset>
		</div>
		</div>

    <div style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center;">
        <input type="file" id="jsonFileInput" style="display:none" onchange="carregarDeJSON(this)">
        <button class="orange-button" onclick="document.getElementById('jsonFileInput').click()">üì• Carregar Planejamento</button>
        <button class="orange-button" onclick="salvarComoJSON()">üíæ Salvar Planejamento</button>
        <button class="orange-button" onclick="abrirModalDivisaoPDF()">üìÑ Gerar PDF/ZIP</button>
    </div>

    <div id="validation-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3>Campos Obrigat√≥rios</h3>
            <p>Por favor, preencha os seguintes campos antes de gerar o PDF:</p>
            <ul id="lista-campos-faltando"></ul>
            <button class="modal-close-btn" onclick="document.getElementById('validation-modal').style.display='none'">Fechar</button>
        </div>
    </div>
	
	<!-- Modal de Confirma√ß√£o para Remover Cap√≠tulo -->
    <div id="confirm-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 style="color: #f0ad4e;">Confirma√ß√£o de Exclus√£o</h3>
            <p id="confirm-modal-message">Deseja excluir o cap√≠tulo?</p>
            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
                <button class="orange-button" id="confirm-modal-yes">Sim</button>
                <button class="orange-button" id="confirm-modal-no">N√£o</button>
            </div>
        </div>
    </div>
	
	<!-- Modal de C√≥pia de Cap√≠tulo -->
    <div id="copy-chapter-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h3 style="color: #f0ad4e;">Copiar Cap√≠tulo de Outro Ve√≠culo</h3>
            <label for="select-veiculo-copia">De qual ve√≠culo?</label>
            <select id="select-veiculo-copia" onchange="popularCapitulosParaCopia()" style="width: 100%; margin-top: 5px; margin-bottom: 15px;"></select>
            
            <label for="select-capitulo-copia">Qual cap√≠tulo?</label>
            <select id="select-capitulo-copia" style="width: 100%; margin-top: 5px;"></select>

            <div style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
                <button class="orange-button" onclick="executarCopiaCapitulo()">Copiar</button>
                <button class="orange-button" onclick="document.getElementById('copy-chapter-modal').style.display='none'">Cancelar</button>
            </div>
        </div>
    </div>
	
	<div id="text-editor-toolbar" style="display: none; position: absolute; background-color: #f0f0f0; border: 1px solid #ccc; border-radius: 5px; padding: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); z-index: 9999;">
		<button type="button" onmousedown="event.preventDefault();" onclick="formatText('bold')" title="Negrito" style="font-weight: bold;">N</button>
		<button type="button" onmousedown="event.preventDefault();" onclick="formatText('italic')" title="It√°lico" style="font-style: italic;">I</button>
		<button type="button" onmousedown="event.preventDefault();" onclick="formatText('underline')" title="Sublinhado" style="text-decoration: underline;">S</button>
		<input type="color" id="text-color-picker" onmousedown="event.preventDefault();" onchange="formatTextColor(this.value)" title="Cor do Texto">
		<button type="button" onmousedown="event.preventDefault();" onclick="formatText('insertOrderedList')" title="Lista Numerada">1.</button>
		<button type="button" onmousedown="event.preventDefault();" onclick="formatText('insertUnorderedList')" title="Lista com Marcadores">‚Ä¢</button>
	</div>
	
	<div id="pdfSplitModal" class="modal-overlay" style="display:none;">
		<div class="modal-content">
			<h3>DIVIDIR EM PARTE 1 e PARTE 2?</h3>
			<div class="modal-buttons" style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
				<button id="splitSim" class="orange-button">SIM</button>
				<button id="splitNao" class="orange-button">N√ÉO</button>
			</div>
		</div>
	</div>

	<div id="chapterSelectionModal" class="modal-overlay" style="display:none;">
		<div class="modal-content">
			<h3>QUAIS CAP√çTULOS DESEJA MOVER PARA A PARTE 2?</h3>
			<p style="font-size: 0.9em; color: #666;">Os cap√≠tulos n√£o selecionados permanecer√£o na PARTE 1.</p>
			<div id="capitulos-checkboxes" style="text-align: left; max-height: 250px; overflow-y: auto; padding: 10px; border: 1px solid #eee; border-radius: 6px;">
				<p style="text-align: center; color: #999;">Carregando cap√≠tulos...</p>
			</div>
			<div class="modal-buttons" style="display: flex; justify-content: center; gap: 15px; margin-top: 20px;">
				<button id="confirmSelection" class="orange-button">OK</button>
				<button id="cancelSelection" class="orange-button">CANCELAR</button>
			</div>
		</div>
	</div>
		
<script src="script.js"></script> <!-- CHAMADA DAS FUN√á√ïES -->
</body>
</html>
